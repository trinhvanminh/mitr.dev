{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "use-sound",
  "type": "registry:hook",
  "title": "Sound Hook",
  "description": "Custom React hook to load and play a sound from a given URL using the Web Audio API.",
  "files": [
    {
      "path": "src/hooks/use-sound.ts",
      "content": "import { useCallback, useEffect, useRef } from \"react\";\r\n\r\n/**\r\n * Custom React hook to load and play a sound from a given URL using the Web Audio API.\r\n *\r\n * This hook fetches the audio file at the specified URL, decodes it, and prepares it for playback.\r\n * It returns a `play` function that can be called to play the loaded sound.\r\n *\r\n * @param url - The URL of the audio file to load and play.\r\n * @returns A function that, when called, plays the loaded sound.\r\n *\r\n * @remarks\r\n * - If the Web Audio API is not supported in the browser, a warning is logged and playback is disabled.\r\n * - The audio context and buffer are managed internally using React refs.\r\n * - Errors during fetching or decoding the audio are logged to the console.\r\n *\r\n * @example\r\n * ```tsx\r\n * const playClick = useSound('/sounds/click.mp3');\r\n * // Later in an event handler:\r\n * playClick();\r\n * ```\r\n */\r\nexport function useSound(url: string) {\r\n  const audioCtxRef = useRef<AudioContext | null>(null);\r\n  const bufferRef = useRef<AudioBuffer | null>(null);\r\n\r\n  useEffect(() => {\r\n    const AudioContextClass =\r\n      window.AudioContext ||\r\n      (window as unknown as { webkitAudioContext: typeof AudioContext })\r\n        .webkitAudioContext;\r\n\r\n    if (!AudioContextClass) {\r\n      console.warn(\"Web Audio API is not supported in this browser.\");\r\n      return;\r\n    }\r\n\r\n    const audioCtx = new AudioContextClass();\r\n    audioCtxRef.current = audioCtx;\r\n\r\n    fetch(url)\r\n      .then((res) => res.arrayBuffer())\r\n      .then((data) => audioCtx.decodeAudioData(data))\r\n      .then((decoded) => {\r\n        bufferRef.current = decoded;\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Failed to load click sound from ${url}:`, err);\r\n      });\r\n  }, [url]);\r\n\r\n  const play = useCallback((volume: number = 1) => {\r\n    if (audioCtxRef.current && bufferRef.current) {\r\n      const source = audioCtxRef.current.createBufferSource();\r\n      const gainNode = audioCtxRef.current.createGain();\r\n\r\n      source.buffer = bufferRef.current;\r\n      gainNode.gain.value = volume;\r\n\r\n      source.connect(gainNode);\r\n      gainNode.connect(audioCtxRef.current.destination);\r\n      source.start(0);\r\n    }\r\n  }, []);\r\n\r\n  return play;\r\n}\r\n",
      "type": "registry:hook"
    }
  ]
}